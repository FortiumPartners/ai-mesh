---
name: create-trd
description: Take an existing PRD (generated by /plan-product) and delegate to tech-lead-orchestrator for technical requirements, architecture design, and implementation planning. Saves output to @docs/TRD/
---

## Mission

This command takes a comprehensive Product Requirements Document (PRD) created by the `/create-prd` command and delegates it to the  product-management-orchastrator via ai-mesh-orchestrator for technical planning, architecture design, and implementation breakdown. All outputs are automatically saved to `@docs/TRD/` directory for easy reference and version control.

## Workflow

### Phase 1: PRD Analysis & Validation
1. **PRD Ingestion**: Parse and analyze existing PRD document
2. **Requirements Validation**: Ensure completeness of functional and non-functional requirements
3. **Acceptance Criteria Review**: Validate testable acceptance criteria
4. **Context Preparation**: Prepare PRD for technical planning delegation

### Phase 2: Agent Mesh Delegation
1. **AI Mesh Orchestrator**: Route validated PRD to ai-mesh-orchestrator
2. **Tech Lead Orchestrator**: Delegate technical planning and architecture design
3. **TRD Generation**: Generate Technical Requirements Document (TRD)
4. **Task Breakdown**: Create actionable development tasks with estimates and **checkboxes**
5. **Implementation Planning**: Develop sprint planning with **trackable task lists**

### Phase 3: Output Management
1. **TRD Creation**: Generate comprehensive TRD document with project-specific naming
2. **File Organization**: Save to `@docs/TRD/` directory with descriptive filename
3. **Version Control**: Include timestamp and PRD reference for traceability
4. **Documentation Links**: Update cross-references between PRD and TRD documents

## Expected PRD Input Format

This command expects a PRD generated by `/plan-product` with the following structure:

### Required Sections
- **Product Summary**: Problem statement, solution overview, value proposition
- **User Analysis**: Primary users, personas, pain points, user journey
- **Goals & Non-Goals**: Primary objectives, success criteria, scope boundaries
- **Technical Requirements**: Functional and non-functional requirements
- **Acceptance Criteria**: Measurable success criteria with test scenarios
- **Implementation Planning**: Phases, timeline, constraints
- **Risk Assessment**: Technical and business risks with mitigation strategies

## TRD Output Format with Task Tracking

The generated TRD will include:

### Sprint Structure with Checkboxes
```markdown
## Sprint 1: Core Foundation (Week 1)
**Duration**: 5 days | **Total Estimate**: 32 hours

### Tasks
- [ ] **Task 1.1**: Environment Setup (4 hours)
- [ ] **Task 1.2**: Database Schema Design (6 hours) 
- [ ] **Task 1.3**: API Framework Configuration (8 hours)
- [ ] **Task 1.4**: Authentication System (8 hours)
- [ ] **Task 1.5**: Unit Test Framework (6 hours)

### Sprint Goals
- [ ] Development environment fully operational
- [ ] Database design approved and implemented
- [ ] Basic API framework responding to requests
- [ ] User authentication working end-to-end
- [ ] Testing framework validates all components

### Definition of Done
- [ ] All tasks marked complete with working code
- [ ] Code review passed with no critical issues
- [ ] Unit tests written and passing (>80% coverage)
- [ ] Integration tests validate sprint goals
- [ ] Documentation updated for implemented features
```

### Story Structure with Checkboxes
```markdown
## User Story: User Authentication System

### Acceptance Criteria
- [ ] **AC 1**: Users can register with email and password
- [ ] **AC 2**: Users can login with valid credentials
- [ ] **AC 3**: Invalid login attempts are rejected with clear error messages
- [ ] **AC 4**: User sessions persist across browser refreshes
- [ ] **AC 5**: Users can securely logout and sessions are invalidated

### Implementation Tasks
- [ ] **Backend**: Create user registration API endpoint (4 hours)
- [ ] **Backend**: Implement login/logout API endpoints (4 hours)
- [ ] **Frontend**: Build registration form with validation (6 hours)
- [ ] **Frontend**: Create login form and session management (6 hours)
- [ ] **Testing**: Write unit tests for authentication APIs (4 hours)
- [ ] **Testing**: Create E2E tests for user authentication flow (4 hours)
```

### Example PRD Reference
See `/docs/PRD/python-to-nodejs-hooks-conversion.md` for a complete example of the expected PRD format that this command processes.

## Usage Examples

### Using Existing PRD File
```
/create-trd /docs/PRD/python-to-nodejs-hooks-conversion.md
# Output saved to: /docs/TRD/python-to-nodejs-hooks-conversion-trd.md
```

### Using PRD from plan-product Command
```
# First, generate PRD with plan-product
/plan-product "Convert Python hooks to Node.js for simplified installation"

# Then convert to TRD with the generated PRD
/create-trd /docs/PRD/python-hooks-conversion-prd.md
# Output saved to: /docs/TRD/python-hooks-conversion-trd.md
```

### Multiple PRDs Implementation
```
/create-trd /docs/PRD/user-authentication-system.md
# Output saved to: /docs/TRD/user-authentication-system-trd.md

/create-trd /docs/PRD/analytics-dashboard.md
# Output saved to: /docs/TRD/analytics-dashboard-trd.md

/create-trd /docs/PRD/real-time-collaboration.md
# Output saved to: /docs/TRD/real-time-collaboration-trd.md
```

## Agent Delegation Flow

```
User Request → create-trd /path/to/existing-prd.md
    ↓
Read and Parse Existing PRD Document
    ↓
Validate PRD Completeness and Format
    ↓
Task(ai-mesh-orchestrator, "Take this validated PRD and delegate to tech-lead-orchestrator for complete technical planning, architecture design, and implementation breakdown")
    ↓
ai-mesh-orchestrator analyzes PRD requirements and delegates to tech-lead-orchestrator
    ↓
tech-lead-orchestrator follows Phase 1-3 methodology:
  • Phase 1: Plan & Requirements Analysis
  • Phase 2: Architecture Design 
  • Phase 3: Task Breakdown & Sprint Planning with Checkbox Tracking
    ↓
Generate comprehensive TRD document
    ↓
Save TRD to @docs/TRD/ with descriptive filename
    ↓
Return complete TRD path and summary to user
```

## Success Criteria

- **PRD Validation**: Existing PRD parsed and validated for completeness
- **Technical Requirements**: TRD generated with system architecture and constraints
- **Task Breakdown**: Development tasks with 2-8 hour estimates and dependencies
- **Sprint Planning**: Organized sprints with clear deliverables and quality gates
- **TRD Documentation**: Complete TRD saved to `@docs/TRD/` with descriptive naming
- **Implementation Ready**: Complete technical plan suitable for development team handoff

## Integration Points

- **Plan-Product Integration**: Designed to work with PRDs generated by `/plan-product` command
- **AgentOS Standards**: Follows TRD template from docs/agentos/TRD.md
- **Documentation Organization**: Saves TRD output to structured `@docs/TRD/` directory
- **Context7 Integration**: Pulls relevant technical documentation and examples
- **Linear Integration**: Creates technical epics and implementation stories
- **Git Workflow Integration**: Generates branch strategy and commit planning

## Quality Gates

- PRD format and completeness validation
- Requirements technical feasibility assessment  
- Acceptance criteria implementation validation
- Architecture design review and approval
- Task breakdown granularity verification (2-8 hour tasks)
- Sprint dependency mapping validation

## Implementation Example

Using the Python to Node.js hooks conversion PRD (`/docs/PRD/python-to-nodejs-hooks-conversion.md`), the command would:

1. **Parse PRD sections**: Extract user analysis, technical requirements, acceptance criteria
2. **Validate completeness**: Ensure all required sections present and detailed
3. **Delegate to tech-lead-orchestrator**: Route PRD with full context for technical planning
4. **Generate outputs**: 
   - Technical Requirements Document (TRD)
   - System architecture design
   - Task breakdown (analytics-engine.py → analytics-engine.js conversion, etc.)
   - Sprint planning with 5-week timeline
   - Quality gates and testing strategy
5. **Save TRD**: Output saved to `/docs/TRD/python-to-nodejs-hooks-conversion-trd.md` with timestamp and PRD reference

## Notes

- Expects PRD input from `/plan-product` command or compatible format
- Validates PRD completeness before technical delegation
- Leverages tech-lead-orchestrator's full Phase 1-3 methodology
- Maintains traceability from PRD requirements through implementation tasks
- Integrates with existing agent mesh for specialized technical planning
