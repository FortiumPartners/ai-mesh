---
name: implement-trd
description: Take a Technical Requirements Document (TRD) generated by /prd-to-trd and delegate to ai-mesh-orchestrator for complete implementation, review, and testing by specialized sub-agents
---

## Mission

This command takes a comprehensive Technical Requirements Document (TRD) and delegates the complete implementation to the ai-mesh-orchestrator, which performs strategic request analysis and routes to tech-lead-orchestrator for structured development methodology including planning, architecture validation, task breakdown, development loops, code review, testing, and deployment.

## Workflow

### Phase 1: TRD Analysis & Validation
1. **TRD Ingestion**: Parse and analyze existing TRD document with **checkbox tracking**
2. **Technical Feasibility Review**: Validate implementation approach and architecture
3. **Resource Assessment**: Identify required specialist agents and tools
4. **Context Preparation**: Prepare TRD for implementation delegation

### Phase 2: AI Mesh Orchestrator Delegation
1. **Strategic Request Analysis**: ai-mesh-orchestrator performs strategic analysis of TRD implementation requirements
2. **Development Project Classification**: Identifies as "development_project" requiring full methodology
3. **Tech Lead Orchestrator Delegation**: Routes to tech-lead-orchestrator for complete traditional development methodology
4. **Implementation Orchestration**: tech-lead-orchestrator manages planning, architecture, task breakdown, development loops, and quality gates
5. **Specialist Agent Coordination**: tech-lead-orchestrator delegates to appropriate specialist agents based on technical requirements

### Phase 3: Progressive Implementation with Work Review
1. **Planning & Architecture Validation**: Validate TRD architecture against current system constraints
2. **Task Status Assessment**: **Review completed work** before proceeding with incomplete tasks
3. **Incremental Implementation**: Work through **unchecked tasks** systematically
4. **Continuous Integration**: Test and validate completed work before moving to next tasks
5. **Quality Gates**: Code review, security scanning, performance validation, and DoD enforcement
6. **Sprint Review**: **Mark completed tasks as done** and validate sprint objectives
7. **Documentation & Deployment**: Update documentation, create deployment procedures, and production readiness

## Expected TRD Input Format

This command expects a TRD generated by `/prd-to-trd` with the following structure:

### Required Sections
- **System Architecture**: Component design, data flow, and integration points
- **Technical Specifications**: APIs, data contracts, performance requirements
- **Implementation Tasks**: Detailed task breakdown with estimates (2-8 hour tasks) **with checkboxes**
- **Quality Requirements**: Security, performance, accessibility, and testing standards
- **Sprint Planning**: Organized development phases with dependencies **with trackable task lists**
- **Acceptance Criteria**: Measurable validation criteria for each component **with checkbox tracking**

### Expected TRD Checkbox Format
The TRD should contain tasks in this format:
```markdown
## Sprint 1: Core Implementation
- [ ] **Task 1.1**: Set up development environment (4 hours)
- [ ] **Task 1.2**: Implement authentication API (6 hours)
- [x] **Task 1.3**: Create user registration endpoint (4 hours) ✅ COMPLETED
- [ ] **Task 1.4**: Add input validation (2 hours)

### Acceptance Criteria
- [x] **AC 1**: User can register with valid email ✅ COMPLETED
- [ ] **AC 2**: Invalid email addresses are rejected
- [ ] **AC 3**: Password complexity requirements enforced
```

### Example TRD Reference
See `/docs/TRD/python-to-nodejs-hooks-conversion-trd.md` for a complete example of the expected TRD format that this command processes.

## Usage Examples

### Using TRD from prd-to-trd Command
```
# First, convert PRD to TRD
/prd-to-trd /docs/PRD/python-to-nodejs-hooks-conversion.md
# Output: /docs/TRD/python-to-nodejs-hooks-conversion-trd.md

# Then implement the TRD
/implement-trd /docs/TRD/python-to-nodejs-hooks-conversion-trd.md
```

### Direct TRD Implementation
```
/implement-trd /docs/TRD/user-authentication-system-trd.md
/implement-trd /docs/TRD/analytics-dashboard-trd.md
/implement-trd /docs/TRD/real-time-collaboration-trd.md
```

### Task Completion Tracking
```
/implement-trd --mark-complete TRD-001 TRD-003 TRD-007
```

### Progress Status Check
```
/implement-trd --status @docs/TRD/user-authentication-system-trd.md
```

### Multiple TRD Implementation Pipeline
```
# Complete PRD to implementation pipeline
/prd-to-trd /docs/PRD/microservices-architecture.md
/implement-trd /docs/TRD/microservices-architecture-trd.md

/prd-to-trd /docs/PRD/user-dashboard.md
/implement-trd /docs/TRD/user-dashboard-trd.md
```

## Agent Delegation Flow

```
User Request → implement-trd /path/to/trd.md
    ↓
Read and Parse TRD Document
    ↓
Validate TRD Completeness and Technical Specifications
    ↓
Task(ai-mesh-orchestrator, "Analyze this validated TRD and delegate to tech-lead-orchestrator for complete development methodology implementation")
    ↓
ai-mesh-orchestrator performs strategic request analysis:
  • Classifies as "development_project" requiring full methodology
  • Assesses scope as comprehensive implementation project  
  • Determines strategic delegation to tech-lead-orchestrator needed
    ↓
ai-mesh-orchestrator delegates to tech-lead-orchestrator with complete TRD context
    ↓
tech-lead-orchestrator follows complete development methodology:
  • Phase 1: Plan & Requirements (validate TRD architecture and constraints)
  • Phase 2: Architecture & Design (system design validation and refinement)
  • Phase 3: Task Status Review (analyze completed vs incomplete tasks)
  • Phase 4: Progressive Implementation (work only on unchecked tasks)
  • Implementation Loops: Iterative development with specialist agent delegation
  • Work Validation: Review and mark completed tasks before proceeding
  • Quality Gates: Code review, testing, security scanning, performance validation
  • Deployment: Production readiness and deployment procedures
    ↓
tech-lead-orchestrator delegates to specialist agents based on TRD requirements:
  • frontend-developer: UI/UX implementation with accessibility compliance
  • backend-developer: Server-side logic, APIs, and database integration
  • react-component-architect: React-specific patterns and state management
  • rails-backend-expert: Rails MVC, ActiveRecord, and background jobs  
  • nestjs-backend-expert: Node.js backend with NestJS framework
  • test-runner: Unit and integration test implementation
  • playwright-tester: E2E testing and browser automation
  • code-reviewer: Security scanning and DoD enforcement
  • git-workflow: Version control and deployment procedures
    ↓
Return complete implementation status and deployment readiness
```

## Strategic Delegation Logic

Based on ai-mesh-orchestrator's delegation framework:

```
IF request_type == "development_project" AND requires_full_methodology
  → DELEGATE to tech-lead-orchestrator
  (Handles: planning, architecture, task breakdown, development loops, quality gates)

TRD Implementation Classification:
  • request_type: "development_project" (comprehensive technical implementation)
  • requires_full_methodology: TRUE (complete system implementation from TRD)
  • scope: Multi-component system requiring orchestrated development approach  
  • complexity: Strategic (orchestration needed for coordinated implementation)
```

## Success Criteria

- **TRD Validation**: TRD parsed and validated for technical completeness
- **Architecture Implementation**: System components built according to TRD specifications
- **Quality Standards**: All DoD requirements met with security and performance validation
- **Test Coverage**: Comprehensive testing (unit ≥80%, integration ≥70%, E2E coverage)
- **Performance Requirements**: All performance benchmarks from TRD achieved
- **Production Readiness**: Code ready for deployment with documentation and deployment guides

## Integration Points

- **PRD-to-TRD Integration**: Designed to work with TRDs generated by `/prd-to-trd` command
- **AgentOS Standards**: Follows DoD template from docs/agentos/DefinitionOfDone.md
- **AI Mesh Orchestration**: Leverages ai-mesh-orchestrator's strategic delegation capabilities
- **Context7 Integration**: Pulls relevant technical documentation and examples during implementation
- **Linear Integration**: Updates technical epics and implementation stories with progress
- **Git Workflow Integration**: Creates feature branches, commits, and pull requests

## Quality Gates

- TRD technical feasibility and completeness validation
- Architecture design implementation verification
- Security vulnerability scanning and remediation
- Performance benchmark testing and optimization
- Code review with DoD enforcement before deployment
- Comprehensive test suite validation (unit/integration/E2E)
- Documentation completeness and accuracy verification

## Multi-Agent Coordination Examples

### Example 1: Full-Stack Feature Implementation
```
TRD: User authentication system with OAuth integration
ai-mesh-orchestrator analysis: Development project requiring full methodology
tech-lead-orchestrator delegation:
  - PRIMARY: backend-developer (OAuth API implementation)
  - SUPPORTING: frontend-developer (authentication UI with accessibility)
  - VALIDATION: test-runner (unit/integration tests)
  - QUALITY: code-reviewer (security scanning and DoD enforcement)
  - INTEGRATION: git-workflow (deployment procedures)
```

### Example 2: System Migration Project  
```
TRD: Python to Node.js conversion with performance requirements
ai-mesh-orchestrator analysis: Development project with migration complexity
tech-lead-orchestrator delegation:
  - PRIMARY: backend-developer (Node.js implementation)
  - SUPPORTING: file-creator (project structure and configuration)
  - VALIDATION: test-runner (compatibility and performance testing)
  - BENCHMARKING: Performance validation against original Python implementation
  - MIGRATION: Data migration utilities and rollback procedures
```

### Example 3: React Component Library
```
TRD: Design system implementation with accessibility compliance
ai-mesh-orchestrator analysis: Frontend development project with quality requirements
tech-lead-orchestrator delegation:
  - PRIMARY: react-component-architect (component library implementation)
  - SUPPORTING: frontend-developer (accessibility compliance and WCAG 2.1 AA)
  - VALIDATION: playwright-tester (component E2E testing and visual regression)
  - DOCUMENTATION: documentation-specialist (component API docs and usage guides)
```

## TRD Task Management System

### Task Parsing and Identification

The implement-trd command automatically parses TRD files to identify tasks with the format:

```markdown
- [ ] **TRD-XXX**: Task Description (Xh) - Priority: [High|Medium|Low] - Depends: [TRD-YYY, TRD-ZZZ]
```

### Task Completion Workflow

#### 1. Task Identification and Validation
- Parse TRD files to extract task IDs, descriptions, dependencies, and current status
- Validate task dependencies before allowing completion
- Check for prerequisite task completion

#### 2. Task Execution and Completion
- Delegate task implementation to appropriate specialized agents
- Mark tasks as completed when all acceptance criteria met
- Update checkbox status: `- [ ]` → `- [x]`
- Update task timestamps and completion metadata

#### 3. Progress Statistics Updates
- Calculate and update completion percentages
- Update task summary sections automatically
- Refresh project status indicators

#### 4. Dependency Management
- Track task dependencies and enable dependent tasks when prerequisites complete
- Validate dependency chains before task execution
- Prevent circular dependencies and orphaned tasks

### Document Lifecycle Management

#### Completion Detection
- Monitor TRD task completion percentage
- Trigger archival workflow when all tasks (100%) are completed
- Validate all quality gates before archival

#### Automatic Document Archival
When all TRD tasks are completed:

1. **Create Archive Directories** (if they don't exist):
   ```
   @docs/TRD/completed/
   @docs/PRD/completed/
   ```

2. **Move Completed Documents**:
   ```
   @docs/TRD/project-name-trd.md → @docs/TRD/completed/project-name-trd-YYYY-MM-DD.md
   @docs/PRD/project-name-prd.md → @docs/PRD/completed/project-name-prd-YYYY-MM-DD.md
   ```

3. **Update Cross-References**:
   - Update any remaining references to archived documents
   - Create completion summary with final metrics
   - Log archival action with timestamp and completion statistics

### Task Status Tracking Format

#### Updated Task Completion Status Section
```markdown
## Task Completion Status

**Last Updated**: [AUTO-GENERATED TIMESTAMP]
**Completion Rate**: X% (X of Y tasks completed)

### Recently Completed Tasks
- [x] **TRD-001**: Environment setup and development tools (4h) - Completed: 2025-09-19 14:23
- [x] **TRD-005**: Authentication system architecture (6h) - Completed: 2025-09-19 16:45

### In Progress Tasks
- [ ] **TRD-013**: User registration API endpoint (4h) - Started: 2025-09-19 17:00

### Next Priority Tasks
1. **TRD-014**: User login/logout API endpoints (4h) - Ready to start (depends: TRD-005 ✓)
2. **TRD-015**: JWT token management service (3h) - Blocked (depends: TRD-005 ✓, TRD-013 ⏳)
```

### Integration with Agent Mesh

#### Task Assignment Logic
- **TRD-001 to TRD-020**: Foundation tasks → infrastructure-management-subagent, backend-developer
- **TRD-021 to TRD-040**: Development tasks → frontend-developer, backend-developer, framework specialists
- **TRD-041 to TRD-060**: Testing tasks → test-runner, playwright-tester, qa-orchestrator
- **TRD-061+**: Documentation/deployment → documentation-specialist, deployment-orchestrator

#### Quality Gate Integration
- Code review required via code-reviewer before marking tasks complete
- Test validation via test-runner for all implementation tasks
- Security validation for authentication and data handling tasks
- Performance validation for optimization and infrastructure tasks

## Work Review and Progress Tracking

### Pre-Implementation Assessment

Before starting any work, the tech-lead-orchestrator will:

1. **Parse TRD Checkboxes**: Identify all tasks marked with `[ ]` (incomplete) vs `[x]` (completed)
2. **Assess Current State**: Review existing codebase to validate completed task claims
3. **Verify Completeness**: Ensure tasks marked as done actually have working implementations
4. **Plan Remaining Work**: Focus only on unchecked tasks and missing functionality

### Progressive Implementation Process

```
1. REVIEW PHASE:
   ├── Read TRD with checkbox analysis
   ├── Validate completed tasks against codebase
   ├── Identify incomplete/missing tasks
   └── Update TRD checkboxes if misaligned

2. IMPLEMENTATION PHASE:
   ├── Work only on unchecked tasks: [ ]
   ├── Test each completed task immediately
   ├── Mark tasks complete when working: [x]
   └── Update TRD file with progress

3. VALIDATION PHASE:
   ├── Verify all sprint objectives met
   ├── Run comprehensive test suite
   ├── Update documentation
   └── Mark sprint complete when all tasks [x]
```

### Task Completion Workflow

For each unchecked task, the process follows:
1. **Implement**: Specialist agent implements the specific task
2. **Test**: Immediate testing and validation of the implementation
3. **Review**: Code review and quality gates
4. **Mark Complete**: Update TRD checkbox from `[ ]` to `[x]`
5. **Integration**: Ensure compatibility with previously completed tasks

### Performance Monitoring

The ai-mesh-orchestrator will track implementation performance using agent activity tracking:

- **Task Completion Times**: Monitor specialist agent performance against TRD estimates
- **Quality Metrics**: Track code review findings, test coverage, and performance benchmarks
- **Integration Success**: Measure handoff efficiency between specialist agents
- **Progress Tracking**: Real-time updates of checkbox completion in TRD
- **User Satisfaction**: Validate implementation meets TRD acceptance criteria

## Task Execution Workflow with Intelligent Agent Delegation

### Agent Delegation Logic

#### Development Tasks

- **Frontend Work**: → frontend-developer, react-component-architect
- **Backend Work**: → backend-developer, rails-backend-expert, nestjs-backend-expert
- **Full-Stack Features**: → Coordinate frontend + backend agents
- **Database Changes**: → backend-developer + schema specialists

#### Quality & Testing

- **Code Review**: → code-reviewer (after all implementations)
- **Unit Testing**: → test-runner
- **E2E Testing**: → playwright-tester
- **Performance Testing**: → specialized testing agents

#### Workflow Management

- **Git Operations**: → git-workflow
- **File Operations**: → file-creator, directory-monitor
- **Documentation**: → documentation-specialist
- **Context Research**: → context-fetcher

### Coordination Patterns

#### Sequential Workflows

1. **Planning Phase**: Receive TRD from tech-lead-orchestrator
2. **Implementation Phase**: Delegate to appropriate development agents
3. **Testing Phase**: Route to testing specialists
4. **Quality Gate**: Enforce code review and validation
5. **Documentation Phase**: Update docs and complete workflow

#### Parallel Workflows

- **Frontend + Backend**: Coordinate simultaneous development
- **Multiple Features**: Manage independent feature development
- **Testing Streams**: Parallel unit and integration testing

#### Quality Gates

- **Pre-Implementation**: Validate requirements and dependencies
- **Mid-Implementation**: Progress validation and blocker resolution
- **Pre-Review**: Ensure completeness before code review
- **Pre-Merge**: Final validation and approval workflow

## Best Practices for TRD Implementation

### Task Specification Guidelines
- Provide clear task specifications with measurable acceptance criteria
- Reference existing TRDs and technical specifications for context
- Include dependencies and prerequisite information
- Specify quality requirements and validation criteria
- Set realistic timelines and resource constraints

### TRD Task Management Best Practices
- Use unique task IDs (TRD-XXX format) for all trackable tasks
- Include time estimates (2-8 hour granularity) for accurate planning
- Define clear dependencies to enable proper sequencing
- Assign appropriate priority levels (High/Medium/Low) for resource allocation
- Validate task completion against acceptance criteria before marking complete

### Quality Assurance Integration
- Ensure code review via code-reviewer before task completion
- Validate test coverage for all implementation tasks
- Perform security review for authentication and data handling
- Conduct performance validation for optimization tasks
- Document completion with timestamps and completion metadata

### Document Lifecycle Management
- Monitor TRD completion percentage continuously
- Trigger archival workflow only when 100% completion achieved
- Preserve document history with timestamped archive copies
- Update cross-references and maintain documentation integrity
- Generate completion summaries with final project metrics

## Implementation Example

Using the Python to Node.js hooks conversion TRD (`/docs/TRD/python-to-nodejs-hooks-conversion-trd.md`), the command would:

1. **Parse TRD sections**: Extract architecture design, implementation tasks with **checkbox status analysis**
2. **Review completed work**: Check existing codebase against completed checkboxes `[x]`
3. **Identify remaining tasks**: Focus on unchecked tasks `[ ]` that need implementation
4. **Delegate to ai-mesh-orchestrator**: Route TRD with work status and remaining tasks context
5. **Progressive implementation** (only unchecked tasks):
   - backend-developer: Complete remaining Node.js conversion tasks
   - file-creator: Create missing project structure components
   - test-runner: Implement missing unit tests for statistical functions
   - code-reviewer: Review new implementations and validate completed work
   - playwright-tester: Run integration tests for newly implemented features
   - documentation-specialist: Update guides for newly completed functionality
   - git-workflow: Update feature branch with completed tasks and mark checkboxes
6. **Continuous validation**: Mark tasks complete `[x]` as they are implemented and tested
7. **Sprint completion**: Verify all sprint tasks marked complete before moving to next sprint
8. **Production delivery**: Complete Node.js hooks implementation with all checkboxes marked

## Command Integration Points

### AgentOS Standards Integration
- **TRD Specifications**: Follows technical requirements document structure and task breakdown
- **Quality Gates**: Enforces Definition of Done at all checkpoints
- **Task Tracking**: Maintains comprehensive task lifecycle management
- **Documentation Standards**: Integrates with PRD/TRD document standards

### MCP Integration
- **Context7**: Utilizes for vendor documentation and API references during task execution
- **Playwright**: Integrates for E2E testing and browser automation tasks
- **Linear**: Updates ticket status and progress throughout task execution workflow

### Tool Integration
- **Git Workflow**: Coordinates version control operations during task implementation
- **Quality Framework**: Enforces DoD compliance before task completion
- **Agent Mesh**: Seamless handoffs between specialized agents based on task requirements

### File System Integration
- **Document Parsing**: Automatically reads and parses TRD files for task extraction
- **Progress Updates**: Real-time updates to TRD files with completion status
- **Archive Management**: Automated document lifecycle with completion-based archival

## Notes

- **Comprehensive Task Management**: Full task parsing, dependency tracking, and completion workflows
- **Document Lifecycle Management**: Automated archival to completed/ folders when 100% complete
- **Checkbox-Driven Development**: Works with TRDs containing task checkboxes for progress tracking
- **Work Review First**: Always reviews completed work before starting new implementation
- **Progressive Implementation**: Focuses only on unchecked tasks `[ ]` to avoid duplication
- **Real-Time Updates**: Updates TRD checkboxes as tasks are completed and validated
- **Intelligent Agent Delegation**: Routes tasks to appropriate specialist agents
- **Quality Gate Enforcement**: Comprehensive DoD compliance and security validation
- Expects TRD input from `/create-trd` command with complete technical specifications and checkboxes
- Validates TRD completeness and technical feasibility before implementation
- Leverages ai-mesh-orchestrator's strategic delegation and multi-agent coordination
- Maintains traceability from TRD requirements through implementation and testing
- Integrates with existing agent mesh for comprehensive development workflow
- Ensures production-ready deliverables with full quality assurance and documentation

---

_This command implements comprehensive TRD implementation with task management, automated completion tracking, document lifecycle management, and intelligent agent delegation following Leo's AI-Augmented Development Process for optimal development workflow management._